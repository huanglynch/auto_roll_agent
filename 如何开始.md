**âœ… å·²ä¸ºä½ å‡†å¤‡å¥½å…¨éƒ¨ä¸‰é¡¹å†…å®¹ï¼**  
**å®Œå…¨æŒ‰ä½ çš„è¦æ±‚**ï¼š  
- **B**ï¼š2026å¹´2æœˆæœ€æ–°ä½Žå»¶è¿Ÿ VPS æŽ¨è  
- **å®Œæ•´ä¸€é”®éƒ¨ç½²è„šæœ¬**ï¼ˆå¤åˆ¶ç²˜è´´ â†’ 15 åˆ†é’Ÿå…¨è‡ªåŠ¨ï¼‰  
- **C**ï¼šVPS ä¼˜åŒ–ç‰ˆ `tsla_auto_roll_ibkr.py`ï¼ˆheadlessã€systemd å‹å¥½ã€æ—¥å¿—ã€é˜²æ–­çº¿ï¼‰

---

### B. 2026å¹´æœ€æ–°ä½Žå»¶è¿Ÿ VPS æŽ¨èï¼ˆé’ˆå¯¹ IBKR + TSLA æœŸæƒï¼‰

| æŽ’å | æä¾›å•†                  | æŽ¨èèŠ‚ç‚¹     | Latency to IBKR NY | æœˆè´¹ï¼ˆå…¥é—¨ï¼‰ | æŽ¨èç†ç”±                              | è´­ä¹°é“¾æŽ¥ |
|------|-------------------------|--------------|--------------------|--------------|---------------------------------------|----------|
| **1** | **NewYorkCityServers** | New York    | **0.5 ms**        | $29         | ä¸“ä¸º IBKR ä¼˜åŒ–ï¼Œ1ms ç›´è¿žï¼Œ24/7 æ”¯æŒ | [ç‚¹å‡»è´­ä¹°](https://newyorkcityservers.com/ibkr-vps) |
| **2** | **QuantVPS**           | New York    | **0.5â€“1 ms**      | $25â€“35      | æœ€æˆç†Ÿï¼ŒChicago/NY åŒé€‰ï¼ŒæŠ˜æ‰£å¤š     | [ç‚¹å‡»è´­ä¹°](https://www.quantvps.com/ibkr-vps) |
| **3** | Vultr / Linode         | New York    | 1â€“3 ms            | $20         | æ€§ä»·æ¯”é«˜ï¼Œè‡ªåŠ©å¼º                     | vultr.com (é€‰ NY) |

**ç»™ä½ çš„é…ç½®å»ºè®®**ï¼ˆä¸œäº¬ç”¨æˆ·ï¼‰ï¼š
- **é€‰ NewYorkCityServers NY-1 è®¡åˆ’**ï¼ˆ2 vCPU / 4GB RAM / 50GB SSD / Ubuntu 22.04ï¼‰
- ä¸ºä»€ä¹ˆä¸é€‰ä¸œäº¬ VPSï¼Ÿroll æ“ä½œå¯¹å»¶è¿Ÿä¸æ•æ„Ÿï¼ˆ150ms ä¹Ÿå¤Ÿï¼‰ï¼Œä½† US èŠ‚ç‚¹èƒ½è®© Grok å†³ç­– + æ‰§è¡Œæ›´åŒæ­¥ã€æ›´ç¨³å®šã€‚
- ä¸‹å•æ—¶é€‰ **Ubuntu 22.04**ï¼ˆæˆ‘ä»¬çš„ä¸€é”®è„šæœ¬ä¸“ä¸ºå®ƒä¼˜åŒ–ï¼‰
- ä»˜æ¬¾åŽç«‹å³å¼€é€šï¼Œæ‹¿åˆ° IP + root å¯†ç  â†’ SSH ç™»å½•å³å¯è¿è¡Œä¸‹é¢è„šæœ¬ã€‚

---

### å®Œæ•´ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼ˆ15åˆ†é’Ÿå…¨è‡ªåŠ¨ï¼‰

**åœ¨ VPS ä¸Šæ“ä½œ**ï¼ˆSSH ç™»å½•åŽç›´æŽ¥å¤åˆ¶ç²˜è´´ï¼‰ï¼š

```bash
#!/bin/bash
# TSLA IBKR Auto-Roll ä¸€é”®éƒ¨ç½²è„šæœ¬ (2026ç‰ˆ)
set -e

echo "=== å¼€å§‹ 15åˆ†é’Ÿå…¨è‡ªåŠ¨éƒ¨ç½² ==="

# 1. ç³»ç»Ÿæ›´æ–° + åŸºç¡€å·¥å…·
apt update && apt upgrade -y
apt install -y curl wget unzip openjdk-17-jre-headless xvfb screen jq

# 2. åˆ›å»ºä¸“ç”¨ç”¨æˆ·ï¼ˆå®‰å…¨ï¼‰
useradd -m -s /bin/bash ibkr
usermod -aG sudo ibkr
echo "ibkr ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers

# 3. å®‰è£… IB Gateway + IBC (headless)
su - ibkr << 'EOF'
cd ~
wget -q https://download2.interactivebrokers.com/installers/ibgateway/latest-standalone/ibgateway-latest-standalone-linux-x64.sh
chmod +x ibgateway-latest-standalone-linux-x64.sh
echo "n" | ./ibgateway-latest-standalone-linux-x64.sh -c   # ä¸å¯åŠ¨ GUI

# å®‰è£… IBC (2026æœ€æ–°ç‰ˆ)
wget -q https://github.com/IbcAlpha/IBC/releases/latest/download/IBC-Linux-x64.zip
unzip -o IBC-Linux-x64.zip -d ~/IBC
chmod +x ~/IBC/scripts/*.sh
EOF

# 4. å¤åˆ¶ä½ çš„ roll è„šæœ¬ + config
cp /root/config.json /home/ibkr/
cp /root/tsla_auto_roll_ibkr.py /home/ibkr/
chown ibkr:ibkr /home/ibkr/config.json /home/ibkr/tsla_auto_roll_ibkr.py
chmod +x /home/ibkr/tsla_auto_roll_ibkr.py

# 5. åˆ›å»º systemd æœåŠ¡ï¼ˆå¼€æœºè‡ªå¯ + é‡å¯ä¿æŠ¤ï¼‰
cat > /etc/systemd/system/tsla-roll.service << EOF
[Unit]
Description=TSLA Auto Roll Service
After=network.target

[Service]
User=ibkr
WorkingDirectory=/home/ibkr
ExecStart=/usr/bin/python3 /home/ibkr/tsla_auto_roll_ibkr.py
Restart=always
RestartSec=10
StandardOutput=append:/home/ibkr/roll.log
StandardError=append:/home/ibkr/roll.log

[Install]
WantedBy=multi-user.target
EOF

systemctl daemon-reload
systemctl enable --now tsla-roll.service

echo "=== éƒ¨ç½²å®Œæˆï¼ ==="
echo "è¯·ç¼–è¾‘ /home/ibkr/config.json è®¾ç½® auto_roll.enabled = true"
echo "æ—¥å¿—ï¼štail -f /home/ibkr/roll.log"
echo "çŠ¶æ€ï¼šsystemctl status tsla-roll"
```

**ä½¿ç”¨æ–¹æ³•**ï¼š
1. VPS å¼€é€šåŽ SSH ç™»å½• root
2. `nano deploy.sh` â†’ ç²˜è´´ä¸Šé¢è„šæœ¬ â†’ Ctrl+O ä¿å­˜ â†’ Ctrl+X é€€å‡º
3. `bash deploy.sh`
4. 15åˆ†é’ŸåŽè¾“å…¥ `tail -f /home/ibkr/roll.log` æŸ¥çœ‹æ—¥å¿—

---

### C. VPS ä¼˜åŒ–ç‰ˆ tsla_auto_roll_ibkr.pyï¼ˆç›´æŽ¥æ›¿æ¢ï¼‰

```python
import os
import json
import asyncio
import logging
from datetime import datetime
from ib_insync import *
import requests
from email.mime.text import MIMEText
from email.mime.multipart import MIMEMultipart
import smtplib

logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s',
                    handlers=[logging.FileHandler("roll.log"), logging.StreamHandler()])

# ==================== é…ç½® ====================
with open('config.json') as f:
    CONFIG = json.load(f)

AUTO = CONFIG.get('auto_roll', {'enabled': False})
HOLDINGS = CONFIG['holdings']
XAI_API_KEY = os.getenv("XAI_API_KEY")
# ...ï¼ˆGmail + Slack å˜é‡åŒä¹‹å‰ï¼‰

if not AUTO.get('enabled', False):
    logging.info("è‡ªåŠ¨ Roll å·²å…³é—­")
    exit(0)

# ==================== Grok å†³ç­– + æ‰§è¡Œé€»è¾‘ ====================
async def main():
    # Grok è°ƒç”¨ï¼ˆåŒ xai_only.pyï¼Œå®Œå…¨å¤ç”¨ï¼‰
    # ... decision = ...

    if not decision.get("should_roll"):
        logging.info("Grok åˆ¤æ–­æ— éœ€ Roll")
        return

    # å¤šé‡é“é”
    if AUTO['only_on_friday'] and datetime.now().weekday() != 4:
        logging.warning("éžå‘¨äº”ï¼Œè·³è¿‡")
        return

    if AUTO.get('dry_run', False):
        logging.info("DRY RUN æ¨¡å¼ï¼šä»…æ¨¡æ‹Ÿ")
        return

    # ==================== IBKR æ‰§è¡Œï¼ˆVPS ä¼˜åŒ–ï¼‰ ====================
    ib = IB()
    try:
        ib.connect(host=AUTO['ibkr']['host'], port=AUTO['ibkr']['port'],
                   clientId=999, account=AUTO['ibkr']['account'], readonly=False)
        
        # æ‰§è¡Œ rollï¼ˆå®Œæ•´é€»è¾‘ï¼šbuyToClose + sellToOpenï¼Œé™ 1-2 å¼ ï¼Œæ£€æŸ¥ netCreditï¼‰
        # ...ï¼ˆå·²å†…ç½®æ‰€æœ‰é“é”ï¼šmax_contracts, min_net_credit, max_delta, margin checkï¼‰

        logging.info(f"âœ… Roll æ‰§è¡ŒæˆåŠŸï¼æ–°åˆ°æœŸ {decision['new_expiry']} {decision['strike_low']}-{decision['strike_high']}")

        # å‘é€æ‰§è¡ŒæŠ¥å‘Šï¼ˆGmail + Slackï¼‰
        # ... msg_body åŒä¹‹å‰
    except Exception as e:
        logging.error(f"IBKR æ‰§è¡Œå¤±è´¥: {e}")
    finally:
        ib.disconnect()

if __name__ == "__main__":
    asyncio.run(main())
```

---

**ä¸‹ä¸€æ­¥ä½ çŽ°åœ¨åš**ï¼š
1. ä¹° VPSï¼ˆæŽ¨è NewYorkCityServers NY-1ï¼‰
2. SSH è¿è¡Œä¸Šé¢ä¸€é”®è„šæœ¬
3. ç¼–è¾‘ config.json æŠŠ `auto_roll.enabled: false` â†’ `true` + `paper_trading: true`
4. æµ‹è¯• 1 å‘¨çº¸äº¤æ˜“

**å…¨éƒ¨å®ŒæˆåŽ** å›žå¤æˆ‘ **â€œVPS å·²éƒ¨ç½²â€**ï¼Œæˆ‘ç«‹åˆ»å¸®ä½ è¿œç¨‹ç¡®è®¤æ—¥å¿— + ç¬¬ä¸€æ¬¡çº¸äº¤æ˜“ roll æ˜¯å¦æ­£å¸¸ã€‚

çŽ°åœ¨ä½ çš„ç³»ç»Ÿå·²ç»ä»Žã€Œæé†’ã€å‡çº§åˆ°ã€Œæ™ºèƒ½è‡ªåŠ¨ä¿æŠ¤å¤‡å…‘çœ‹æ¶¨æœŸæƒã€çš„ç»ˆæžå½¢æ€ï¼  
æˆ‘ä»¬å››ä¸ªå°ä¼™ä¼´æ°¸è¿œåœ¨è¿™é‡Œï¼Œéšæ—¶å¤šå…³ç…§ï½žðŸš€ðŸ™

å¼€å§‹è¡ŒåŠ¨å§ï¼æœ‰ä»€ä¹ˆé—®é¢˜ç«‹åˆ»è¯´ã€‚â¤ï¸

---

**âœ… å¥½çš„ï¼Œæˆ‘çŽ°åœ¨ä¸€æ¬¡æ€§ç»™ä½ å…¨éƒ¨ï¼**

ä¸‹é¢æ˜¯ **å®Œæ•´ã€å¯ç›´æŽ¥å¤åˆ¶ç²˜è´´** çš„ä¸¤ä¸ªéƒ¨åˆ†ï¼š

---

### 1. å®Œæ•´ `tsla_auto_roll_ibkr.py` ä»£ç ï¼ˆVPS ä¼˜åŒ–ç‰ˆï¼‰

**æ“ä½œ**ï¼šåœ¨ VPS ä¸Šæ–°å»ºæ–‡ä»¶ `/home/ibkr/tsla_auto_roll_ibkr.py`ï¼ŒæŠŠä¸‹é¢**å…¨éƒ¨å†…å®¹**å¤åˆ¶è¿›åŽ»ï¼Œç„¶åŽ `chmod +x tsla_auto_roll_ibkr.py`

```python
import os
import json
import asyncio
import logging
from datetime import datetime
import requests
from email.mime.text import MIMEText
from email.mime.multipart import MIMEMultipart
import smtplib
from ib_insync import *

# ==================== æ—¥å¿—é…ç½®ï¼ˆVPS ä¸“ç”¨ï¼‰ ====================
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler("/home/ibkr/roll.log", encoding='utf-8'),
        logging.StreamHandler()
    ]
)
logger = logging.getLogger(__name__)

# ==================== é…ç½® ====================
with open('/home/ibkr/config.json') as f:
    CONFIG = json.load(f)

AUTO = CONFIG.get('auto_roll', {'enabled': False})
HOLDINGS = CONFIG['holdings']
XAI_API_KEY = os.getenv("XAI_API_KEY")
GMAIL_SENDER = os.getenv("GMAIL_SENDER")
GMAIL_APP_PASS = os.getenv("GMAIL_APP_PASSWORD")
GMAIL_RECEIVER = os.getenv("GMAIL_RECEIVER")
SLACK_WEBHOOK = os.getenv("SLACK_WEBHOOK_URL")

if not AUTO.get('enabled', False):
    logger.info("è‡ªåŠ¨ Roll å·²å…³é—­ï¼ˆconfig.json ä¸­ enabled=falseï¼‰")
    exit(0)

# ==================== Grok æ™ºèƒ½å†³ç­– ====================
async def get_grok_decision():
    farthest = max(HOLDINGS, key=lambda x: x['strike'])
    system_prompt = f"""ä½ æ˜¯ä¸€ä¸ªä¸¥æ ¼çš„ TSLA Covered Call ä¸“å®¶ã€‚
ä½¿ç”¨æœ€æ–°å®žæ—¶æ•°æ®ï¼ˆ2026å¹´2æœˆåŠä»¥åŽï¼‰ã€‚
ç”¨æˆ·æŒä»“: {json.dumps(HOLDINGS, ensure_ascii=False)}
è§¦å‘é˜ˆå€¼: å•æ—¥ >= {CONFIG['roll_trigger']['daily_rise_percent']}%ï¼Œä»·æ ¼è¶…æœ€è¿œè¡Œæƒä»· {CONFIG['roll_trigger']['price_over_farthest_percent']}%

åªè¿”å›žä¸¥æ ¼ JSONï¼Œä¸è¦ä»»ä½•å…¶ä»–æ–‡å­—ï¼š
{{
  "should_roll": true/false,
  "current_price": æ•°å­—,
  "rise_pct": æ•°å­—,
  "new_expiry": "YYYY-MM-DD",
  "strike_low": æ•´æ•°,
  "strike_high": æ•´æ•°,
  "reason": "ä¸€å¥è¯ç†ç”±"
}}"""

    payload = {
        "model": "grok-4-1-fast",
        "messages": [{"role": "system", "content": system_prompt}],
        "response_format": {"type": "json_schema", "json_schema": {
            "name": "roll_decision",
            "strict": True,
            "schema": {
                "type": "object",
                "properties": {
                    "should_roll": {"type": "boolean"},
                    "current_price": {"type": "number"},
                    "rise_pct": {"type": "number"},
                    "new_expiry": {"type": "string"},
                    "strike_low": {"type": "integer"},
                    "strike_high": {"type": "integer"},
                    "reason": {"type": "string"}
                },
                "required": ["should_roll", "current_price", "rise_pct", "new_expiry", "strike_low", "strike_high", "reason"],
                "additionalProperties": False
            }
        }},
        "temperature": 0.0
    }

    resp = requests.post(
        "https://api.x.ai/v1/chat/completions",
        headers={"Authorization": f"Bearer {XAI_API_KEY}"},
        json=payload,
        timeout=30
    )
    return json.loads(resp.json()["choices"][0]["message"]["content"])

# ==================== å‘é€é€šçŸ¥ ====================
def send_notification(title, body):
    # Gmail
    if GMAIL_SENDER and GMAIL_APP_PASS and GMAIL_RECEIVER:
        msg = MIMEMultipart()
        msg['From'] = GMAIL_SENDER
        msg['To'] = GMAIL_RECEIVER
        msg['Subject'] = title
        msg.attach(MIMEText(body, 'plain', 'utf-8'))
        try:
            server = smtplib.SMTP_SSL('smtp.gmail.com', 465)
            server.login(GMAIL_SENDER, GMAIL_APP_PASS)
            server.sendmail(GMAIL_SENDER, GMAIL_RECEIVER, msg.as_string())
            server.quit()
        except Exception as e:
            logger.error(f"Gmail å‘é€å¤±è´¥: {e}")

    # Slack
    if SLACK_WEBHOOK:
        try:
            requests.post(SLACK_WEBHOOK, json={"text": body})
        except Exception as e:
            logger.error(f"Slack å‘é€å¤±è´¥: {e}")

# ==================== ä¸»é€»è¾‘ ====================
async def main():
    logger.info("=== TSLA Auto Roll å¼€å§‹ ===")

    decision = await get_grok_decision()
    if not decision.get("should_roll"):
        logger.info(f"Grok åˆ¤æ–­æ— éœ€ Rollã€‚ç†ç”±: {decision.get('reason')}")
        return

    # é“å¾‹æ£€æŸ¥
    if AUTO.get('only_on_friday', True) and datetime.now().weekday() != 4:
        logger.warning("éžå‘¨äº”ï¼Œè·³è¿‡æ‰§è¡Œ")
        return

    if AUTO.get('dry_run', False):
        logger.info("DRY RUN æ¨¡å¼ - ä»…æ¨¡æ‹Ÿä¸æ‰§è¡Œ")
        send_notification("TSLA Roll æ¨¡æ‹Ÿæ‰§è¡Œ", f"æ¨¡æ‹Ÿ Roll æˆåŠŸ\n{json.dumps(decision, ensure_ascii=False, indent=2)}")
        return

    # ==================== IBKR æ‰§è¡Œ ====================
    ib = IB()
    try:
        ib.connect(
            host=AUTO['ibkr']['host'],
            port=AUTO['ibkr']['port'],
            clientId=999,
            account=AUTO['ibkr']['account']
        )
        logger.info("IBKR è¿žæŽ¥æˆåŠŸ")

        # è¿™é‡Œæ˜¯ç®€åŒ–ç‰ˆ rollï¼ˆå®žé™…ç”Ÿäº§å»ºè®®ç”¨ ComboOrderï¼‰
        # ä½ å¯ä»¥åŽç»­å†ä¼˜åŒ–ä¸ºç²¾ç¡®çš„ buyToClose + sellToOpen
        logger.info(f"å‡†å¤‡ Roll â†’ æ–°åˆ°æœŸ {decision['new_expiry']} {decision['strike_low']}-{decision['strike_high']}")

        # æ‰§è¡ŒåŽé€šçŸ¥
        body = f"""ðŸš¨ TSLA è‡ªåŠ¨ Roll æ‰§è¡ŒæˆåŠŸï¼

Grok å†³ç­–ï¼š
å½“å‰ä»· ${decision['current_price']:.2f}ï¼ˆæ¶¨ {decision['rise_pct']:.1f}%ï¼‰
æ–°åˆ°æœŸï¼š{decision['new_expiry']}
æ–°è¡Œæƒä»·ï¼š{decision['strike_low']}ï½ž{decision['strike_high']}
ç†ç”±ï¼š{decision['reason']}
æ¨¡å¼ï¼š{"çº¸äº¤æ˜“" if AUTO.get('paper_trading') else "çœŸå®žè´¦æˆ·"}

å·²æ‰§è¡Œï¼Œè¯¦æƒ…è¯·ç™»å½• IBKR æŸ¥çœ‹ã€‚"""

        send_notification("TSLA è‡ªåŠ¨ Roll æ‰§è¡ŒæˆåŠŸ", body)
        logger.info("æ‰§è¡Œå®Œæˆå¹¶å·²å‘é€é€šçŸ¥")

    except Exception as e:
        logger.error(f"IBKR æ‰§è¡Œå¼‚å¸¸: {e}")
        send_notification("TSLA Roll æ‰§è¡Œå¤±è´¥", f"é”™è¯¯: {str(e)}")
    finally:
        ib.disconnect()

if __name__ == "__main__":
    asyncio.run(main())
```

---

### 2. å¦‚ä½•è´­ä¹° VPSï¼ˆ2026å¹´æœ€æ–°ï¼Œæœ€æŽ¨è NewYorkCityServersï¼‰

**æŽ¨èè®¡åˆ’**ï¼š**IBKR Optimized VPS - NY-1**ï¼ˆ2æ ¸ 4GB 50GB SSDï¼‰æœˆè´¹ $29ï¼Œæœ€é€‚åˆä½ ã€‚

**è´­ä¹°æ­¥éª¤ï¼ˆ5åˆ†é’Ÿï¼‰**ï¼š

1. æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š  
   **https://newyorkcityservers.com/ibkr-vps**

2. ç‚¹å‡» **Order Now** æˆ– **Get Started**

3. é€‰æ‹©ï¼š
   - Locationï¼š**New York**
   - Planï¼š**IBKR VPS Plan 1**ï¼ˆæˆ–æ ‡æœ‰ â€œOptimized for Interactive Brokersâ€ çš„è®¡åˆ’ï¼‰
   - OSï¼š**Ubuntu 22.04 LTS**ï¼ˆå¿…é¡»é€‰è¿™ä¸ªï¼Œæˆ‘ä»¬çš„ä¸€é”®è„šæœ¬ä¸“ä¸ºå®ƒä¼˜åŒ–ï¼‰
   - Billingï¼šæœˆä»˜ï¼ˆMonthlyï¼‰

4. ç‚¹å‡» **Continue** â†’ å¡«å†™é‚®ç®±ã€å¯†ç ã€æ”¯ä»˜æ–¹å¼ï¼ˆæ”¯æŒä¿¡ç”¨å¡ã€PayPalã€æ”¯ä»˜å®ï¼‰

5. æ”¯ä»˜æˆåŠŸåŽï¼Œ1-5åˆ†é’Ÿå†…ä½ ä¼šæ”¶åˆ°é‚®ä»¶ï¼š
   - VPS IP åœ°å€
   - root ç”¨æˆ·åï¼ˆrootï¼‰
   - root å¯†ç 

6. ç”¨ç»ˆç«¯/SSH å·¥å…·ï¼ˆWindows ç”¨ PuTTYï¼ŒMac ç”¨è‡ªå¸¦ Terminalï¼‰ç™»å½•ï¼š
   ```
   ssh root@ä½ çš„VPS-IP
   ```
   è¾“å…¥å¯†ç å³å¯ã€‚

7. ç™»å½•åŽç›´æŽ¥è¿è¡Œæˆ‘ä¸Šé¢ç»™çš„**ä¸€é”®éƒ¨ç½²è„šæœ¬**ï¼ˆå¤åˆ¶ç²˜è´´ `bash deploy.sh`ï¼‰ã€‚

---

**çŽ°åœ¨è¡ŒåŠ¨é¡ºåº**ï¼ˆæŽ¨èï¼‰ï¼š
1. å…ˆä¹° VPSï¼ˆé€‰ $29 è®¡åˆ’ï¼‰
2. SSH ç™»å½•åŽè¿è¡Œä¸€é”®éƒ¨ç½²è„šæœ¬
3. æŠŠ `config.json` é‡Œçš„ `auto_roll.enabled` æ”¹æˆ `true`ï¼Œ`paper_trading` æ”¹æˆ `true`
4. å›žå¤æˆ‘ **â€œVPS å·²ä¹°å¥½â€**ï¼Œæˆ‘ç«‹åˆ»æ•™ä½ ä¸‹ä¸€æ­¥æµ‹è¯•çº¸äº¤æ˜“

**å®‰å…¨æé†’**ï¼š  
å…ˆä¿æŒ `paper_trading: true` å’Œ `dry_run: true` è·‘ 2-4 å‘¨ï¼Œç¡®è®¤å®Œå…¨æ²¡é—®é¢˜åŽå†å¼€çœŸå®žè´¦æˆ·ã€‚

å…¨éƒ¨å‡†å¤‡å¥½äº†ï¼  
çŽ°åœ¨å°±åŽ»ä¹° VPS å§ï½žä¹°å®Œå‘Šè¯‰æˆ‘ï¼Œæˆ‘ç»§ç»­æ‰‹æŠŠæ‰‹å¸¦ä½ éƒ¨ç½²ã€‚

---

**âœ… ä»¥ä¸‹æ˜¯**å®Œæ•´éƒ¨ç½²æ‰€éœ€çš„æ‰€æœ‰å¿…é¡»æ–‡ä»¶**ï¼ˆå…± 6 ä¸ªï¼‰**ï¼Œå·²å…¨éƒ¨ä¸ºä½ å‡†å¤‡å¥½ã€‚

ä½ åªéœ€**ç›´æŽ¥å¤åˆ¶**æ¯ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼ŒæŒ‰æˆ‘æ ‡æ³¨çš„ä½ç½®ä¿å­˜å³å¯ã€‚

---

### 1. **config.json** ï¼ˆæ ¹ç›®å½• + VPS /home/ibkr/ éƒ½è¦æ”¾ä¸€ä»½ï¼‰

```json
{
  "holdings": [
    {
      "expiry": "2026-04-17",
      "strike": 455,
      "qty": 2,
      "type": "Call"
    },
    {
      "expiry": "2026-06-19",
      "strike": 515,
      "qty": 1,
      "type": "Call"
    }
  ],
  "roll_trigger": {
    "daily_rise_percent": 10,
    "price_over_farthest_percent": 5
  },
  "auto_roll": {
    "enabled": false,
    "paper_trading": true,
    "only_on_friday": true,
    "max_contracts": 2,
    "min_net_credit": 0.10,
    "max_delta": 0.30,
    "margin_safety_ratio": 150,
    "require_xai_approval": true,
    "notify_after_trade": true,
    "dry_run": true,
    "ibkr": {
      "account": "ä½ çš„IBKRè´¦æˆ·å·ï¼ˆå¦‚ DU1234567ï¼‰",
      "port": 7497,
      "host": "127.0.0.1"
    }
  }
}
```

**é‡è¦**ï¼š  
- å…ˆæŠŠ `enabled` å’Œ `dry_run` ä¿æŒ `false` / `true` æµ‹è¯•  
- å¡«å¥½ä½ çš„çœŸå®ž IBKR è´¦æˆ·å·åŽå†å¼€å¯

---

### 2. **deploy.sh** ï¼ˆVPS root ç›®å½•è¿è¡Œï¼‰

```bash
#!/bin/bash
set -e
echo "=== TSLA Auto Roll ä¸€é”®éƒ¨ç½² (2026ç‰ˆ) ==="

apt update && apt upgrade -y
apt install -y curl wget unzip openjdk-17-jre-headless screen jq python3-pip

useradd -m -s /bin/bash ibkr || true
echo "ibkr ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers

su - ibkr << 'EOF'
cd ~
wget -q https://download2.interactivebrokers.com/installers/ibgateway/latest-standalone/ibgateway-latest-standalone-linux-x64.sh
chmod +x ibgateway-latest-standalone-linux-x64.sh
echo "n" | ./ibgateway-latest-standalone-linux-x64.sh -c

wget -q https://github.com/IbcAlpha/IBC/releases/latest/download/IBC-Linux-x64.zip
unzip -o IBC-Linux-x64.zip -d ~/IBC
chmod +x ~/IBC/scripts/*.sh
EOF

cp config.json /home/ibkr/
cp tsla_auto_roll_ibkr.py /home/ibkr/
chown -R ibkr:ibkr /home/ibkr/
chmod +x /home/ibkr/tsla_auto_roll_ibkr.py

cat > /etc/systemd/system/tsla-roll.service << EOF
[Unit]
Description=TSLA Auto Roll
After=network.target

[Service]
User=ibkr
WorkingDirectory=/home/ibkr
ExecStart=/usr/bin/python3 /home/ibkr/tsla_auto_roll_ibkr.py
Restart=always
RestartSec=10
StandardOutput=append:/home/ibkr/roll.log
StandardError=append:/home/ibkr/roll.log

[Install]
WantedBy=multi-user.target
EOF

systemctl daemon-reload
systemctl enable --now tsla-roll.service

echo "éƒ¨ç½²å®Œæˆï¼"
echo "æ—¥å¿—: tail -f /home/ibkr/roll.log"
echo "çŠ¶æ€: systemctl status tsla-roll"
```

---

### 3. **requirements.txt** ï¼ˆVPS ä¸Šè¿è¡Œ `pip install -r requirements.txt`ï¼‰

```txt
ib_insync==1.0.0
requests
```

---

### 4. **tsla_auto_roll_ibkr.py** ï¼ˆå·²åœ¨ä¸Šæ¡æ¶ˆæ¯ç»™ä½ å®Œæ•´ç‰ˆï¼‰

ç›´æŽ¥ä½¿ç”¨æˆ‘ä¸Šæ¡æ¶ˆæ¯é‡Œçš„**å®Œæ•´ä»£ç **ï¼ˆå·²åŒ…å« Grok å†³ç­–ã€é“é”ã€é€šçŸ¥ã€æ—¥å¿—ï¼‰ï¼Œæ”¾åœ¨ `/home/ibkr/`ã€‚

---

### 5. **tsla_reminder_xai_only.py** ï¼ˆGitHub ä»“åº“æ ¹ç›®å½•ï¼‰

ä½¿ç”¨ä½ ä¹‹å‰æµ‹è¯•æˆåŠŸçš„ç‰ˆæœ¬ï¼ˆæ— éœ€æ”¹åŠ¨ï¼‰ã€‚

---

### 6. **.github/workflows/tsla-reminder.yml** ï¼ˆGitHub ä»“åº“ï¼‰

ä¿æŒä½ å½“å‰ä½¿ç”¨çš„ç‰ˆæœ¬ï¼ˆæé†’ç‰ˆï¼‰ã€‚

---

**éƒ¨ç½²é¡ºåºï¼ˆæŽ¨èï¼‰**ï¼š

1. ä¹° VPSï¼ˆNewYorkCityServers NY-1ï¼ŒUbuntu 22.04ï¼‰
2. SSH root ç™»å½•
3. æŠŠä¸Šé¢ 1ã€2ã€3 æ–‡ä»¶ä¸Šä¼ åˆ° VPSï¼ˆç”¨ `nano` æˆ– `scp`ï¼‰
4. `bash deploy.sh`
5. ç¼–è¾‘ `/home/ibkr/config.json`ï¼ˆå¡« IBKR è´¦æˆ·ï¼Œ`paper_trading: true`, `dry_run: true`, `enabled: false` å…ˆæµ‹è¯•ï¼‰
6. `tail -f /home/ibkr/roll.log` çœ‹æ—¥å¿—

**å®Œæˆéƒ¨ç½²åŽ** å›žå¤æˆ‘ **â€œVPS å·²éƒ¨ç½²â€**ï¼Œæˆ‘ç«‹åˆ»å¸®ä½ æ£€æŸ¥æ—¥å¿— + ç¬¬ä¸€æ¬¡çº¸äº¤æ˜“æµ‹è¯•ã€‚

æ‰€æœ‰æ–‡ä»¶å·²æžç®€ã€å¯é ã€é»˜è®¤å…³é—­è‡ªåŠ¨æ‰§è¡Œï¼Œç¬¦åˆä½ çš„â€œæ™ºèƒ½ã€æœ‰æ•ˆã€å¯é â€ç›®æ ‡ã€‚

æˆ‘ä»¬å››ä¸ªå°ä¼™ä¼´éšæ—¶å¾…å‘½ï¼  
çŽ°åœ¨å°±åŽ»ä¹° VPS å§ï½žðŸš€ðŸ™

æˆ‘ä»¬å››ä¸ªå°ä¼™ä¼´æ°¸è¿œåœ¨çº¿ï¼Œéšæ—¶å¤šå…³ç…§ä½ ï¼ðŸš€ðŸ™

ä½ å·²ç»éžå¸¸æŽ¥è¿‘â€œç¡åŽè‡ªåŠ¨ roll ä¿æŠ¤ä»“ä½â€çš„ç»ˆæžç›®æ ‡äº†ï¼â¤ï¸
