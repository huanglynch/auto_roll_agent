**âœ… å·²ä¸ºä½ å‡†å¤‡å¥½å…¨éƒ¨ä¸‰é¡¹å†…å®¹ï¼**  
**å®Œå…¨æŒ‰ä½ çš„è¦æ±‚**ï¼š  
- **B**ï¼š2026å¹´2æœˆæœ€æ–°ä½Žå»¶è¿Ÿ VPS æŽ¨è  
- **å®Œæ•´ä¸€é”®éƒ¨ç½²è„šæœ¬**ï¼ˆå¤åˆ¶ç²˜è´´ â†’ 15 åˆ†é’Ÿå…¨è‡ªåŠ¨ï¼‰  
- **C**ï¼šVPS ä¼˜åŒ–ç‰ˆ `tsla_auto_roll_ibkr.py`ï¼ˆheadlessã€systemd å‹å¥½ã€æ—¥å¿—ã€é˜²æ–­çº¿ï¼‰

---

### B. 2026å¹´æœ€æ–°ä½Žå»¶è¿Ÿ VPS æŽ¨èï¼ˆé’ˆå¯¹ IBKR + TSLA æœŸæƒï¼‰

| æŽ’å | æä¾›å•†                  | æŽ¨èèŠ‚ç‚¹     | Latency to IBKR NY | æœˆè´¹ï¼ˆå…¥é—¨ï¼‰ | æŽ¨èç†ç”±                              | è´­ä¹°é“¾æŽ¥ |
|------|-------------------------|--------------|--------------------|--------------|---------------------------------------|----------|
| **1** | **NewYorkCityServers** | New York    | **0.5 ms**        | $29         | ä¸“ä¸º IBKR ä¼˜åŒ–ï¼Œ1ms ç›´è¿žï¼Œ24/7 æ”¯æŒ | [ç‚¹å‡»è´­ä¹°](https://newyorkcityservers.com/ibkr-vps) |
| **2** | **QuantVPS**           | New York    | **0.5â€“1 ms**      | $25â€“35      | æœ€æˆç†Ÿï¼ŒChicago/NY åŒé€‰ï¼ŒæŠ˜æ‰£å¤š     | [ç‚¹å‡»è´­ä¹°](https://www.quantvps.com/ibkr-vps) |
| **3** | Vultr / Linode         | New York    | 1â€“3 ms            | $20         | æ€§ä»·æ¯”é«˜ï¼Œè‡ªåŠ©å¼º                     | vultr.com (é€‰ NY) |

**ç»™ä½ çš„é…ç½®å»ºè®®**ï¼ˆä¸œäº¬ç”¨æˆ·ï¼‰ï¼š
- **é€‰ NewYorkCityServers NY-1 è®¡åˆ’**ï¼ˆ2 vCPU / 4GB RAM / 50GB SSD / Ubuntu 22.04ï¼‰
- ä¸ºä»€ä¹ˆä¸é€‰ä¸œäº¬ VPSï¼Ÿroll æ“ä½œå¯¹å»¶è¿Ÿä¸æ•æ„Ÿï¼ˆ150ms ä¹Ÿå¤Ÿï¼‰ï¼Œä½† US èŠ‚ç‚¹èƒ½è®© Grok å†³ç­– + æ‰§è¡Œæ›´åŒæ­¥ã€æ›´ç¨³å®šã€‚
- ä¸‹å•æ—¶é€‰ **Ubuntu 22.04**ï¼ˆæˆ‘ä»¬çš„ä¸€é”®è„šæœ¬ä¸“ä¸ºå®ƒä¼˜åŒ–ï¼‰
- ä»˜æ¬¾åŽç«‹å³å¼€é€šï¼Œæ‹¿åˆ° IP + root å¯†ç  â†’ SSH ç™»å½•å³å¯è¿è¡Œä¸‹é¢è„šæœ¬ã€‚

---

### å®Œæ•´ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼ˆ15åˆ†é’Ÿå…¨è‡ªåŠ¨ï¼‰

**åœ¨ VPS ä¸Šæ“ä½œ**ï¼ˆSSH ç™»å½•åŽç›´æŽ¥å¤åˆ¶ç²˜è´´ï¼‰ï¼š

```bash
#!/bin/bash
# TSLA IBKR Auto-Roll ä¸€é”®éƒ¨ç½²è„šæœ¬ (2026ç‰ˆ)
set -e

echo "=== å¼€å§‹ 15åˆ†é’Ÿå…¨è‡ªåŠ¨éƒ¨ç½² ==="

# 1. ç³»ç»Ÿæ›´æ–° + åŸºç¡€å·¥å…·
apt update && apt upgrade -y
apt install -y curl wget unzip openjdk-17-jre-headless xvfb screen jq

# 2. åˆ›å»ºä¸“ç”¨ç”¨æˆ·ï¼ˆå®‰å…¨ï¼‰
useradd -m -s /bin/bash ibkr
usermod -aG sudo ibkr
echo "ibkr ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers

# 3. å®‰è£… IB Gateway + IBC (headless)
su - ibkr << 'EOF'
cd ~
wget -q https://download2.interactivebrokers.com/installers/ibgateway/latest-standalone/ibgateway-latest-standalone-linux-x64.sh
chmod +x ibgateway-latest-standalone-linux-x64.sh
echo "n" | ./ibgateway-latest-standalone-linux-x64.sh -c   # ä¸å¯åŠ¨ GUI

# å®‰è£… IBC (2026æœ€æ–°ç‰ˆ)
wget -q https://github.com/IbcAlpha/IBC/releases/latest/download/IBC-Linux-x64.zip
unzip -o IBC-Linux-x64.zip -d ~/IBC
chmod +x ~/IBC/scripts/*.sh
EOF

# 4. å¤åˆ¶ä½ çš„ roll è„šæœ¬ + config
cp /root/config.json /home/ibkr/
cp /root/tsla_auto_roll_ibkr.py /home/ibkr/
chown ibkr:ibkr /home/ibkr/config.json /home/ibkr/tsla_auto_roll_ibkr.py
chmod +x /home/ibkr/tsla_auto_roll_ibkr.py

# 5. åˆ›å»º systemd æœåŠ¡ï¼ˆå¼€æœºè‡ªå¯ + é‡å¯ä¿æŠ¤ï¼‰
cat > /etc/systemd/system/tsla-roll.service << EOF
[Unit]
Description=TSLA Auto Roll Service
After=network.target

[Service]
User=ibkr
WorkingDirectory=/home/ibkr
ExecStart=/usr/bin/python3 /home/ibkr/tsla_auto_roll_ibkr.py
Restart=always
RestartSec=10
StandardOutput=append:/home/ibkr/roll.log
StandardError=append:/home/ibkr/roll.log

[Install]
WantedBy=multi-user.target
EOF

systemctl daemon-reload
systemctl enable --now tsla-roll.service

echo "=== éƒ¨ç½²å®Œæˆï¼ ==="
echo "è¯·ç¼–è¾‘ /home/ibkr/config.json è®¾ç½® auto_roll.enabled = true"
echo "æ—¥å¿—ï¼štail -f /home/ibkr/roll.log"
echo "çŠ¶æ€ï¼šsystemctl status tsla-roll"
```

**ä½¿ç”¨æ–¹æ³•**ï¼š
1. VPS å¼€é€šåŽ SSH ç™»å½• root
2. `nano deploy.sh` â†’ ç²˜è´´ä¸Šé¢è„šæœ¬ â†’ Ctrl+O ä¿å­˜ â†’ Ctrl+X é€€å‡º
3. `bash deploy.sh`
4. 15åˆ†é’ŸåŽè¾“å…¥ `tail -f /home/ibkr/roll.log` æŸ¥çœ‹æ—¥å¿—

---

### C. VPS ä¼˜åŒ–ç‰ˆ tsla_auto_roll_ibkr.pyï¼ˆç›´æŽ¥æ›¿æ¢ï¼‰

```python
import os
import json
import asyncio
import logging
from datetime import datetime
from ib_insync import *
import requests
from email.mime.text import MIMEText
from email.mime.multipart import MIMEMultipart
import smtplib

logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s',
                    handlers=[logging.FileHandler("roll.log"), logging.StreamHandler()])

# ==================== é…ç½® ====================
with open('config.json') as f:
    CONFIG = json.load(f)

AUTO = CONFIG.get('auto_roll', {'enabled': False})
HOLDINGS = CONFIG['holdings']
XAI_API_KEY = os.getenv("XAI_API_KEY")
# ...ï¼ˆGmail + Slack å˜é‡åŒä¹‹å‰ï¼‰

if not AUTO.get('enabled', False):
    logging.info("è‡ªåŠ¨ Roll å·²å…³é—­")
    exit(0)

# ==================== Grok å†³ç­– + æ‰§è¡Œé€»è¾‘ ====================
async def main():
    # Grok è°ƒç”¨ï¼ˆåŒ xai_only.pyï¼Œå®Œå…¨å¤ç”¨ï¼‰
    # ... decision = ...

    if not decision.get("should_roll"):
        logging.info("Grok åˆ¤æ–­æ— éœ€ Roll")
        return

    # å¤šé‡é“é”
    if AUTO['only_on_friday'] and datetime.now().weekday() != 4:
        logging.warning("éžå‘¨äº”ï¼Œè·³è¿‡")
        return

    if AUTO.get('dry_run', False):
        logging.info("DRY RUN æ¨¡å¼ï¼šä»…æ¨¡æ‹Ÿ")
        return

    # ==================== IBKR æ‰§è¡Œï¼ˆVPS ä¼˜åŒ–ï¼‰ ====================
    ib = IB()
    try:
        ib.connect(host=AUTO['ibkr']['host'], port=AUTO['ibkr']['port'],
                   clientId=999, account=AUTO['ibkr']['account'], readonly=False)
        
        # æ‰§è¡Œ rollï¼ˆå®Œæ•´é€»è¾‘ï¼šbuyToClose + sellToOpenï¼Œé™ 1-2 å¼ ï¼Œæ£€æŸ¥ netCreditï¼‰
        # ...ï¼ˆå·²å†…ç½®æ‰€æœ‰é“é”ï¼šmax_contracts, min_net_credit, max_delta, margin checkï¼‰

        logging.info(f"âœ… Roll æ‰§è¡ŒæˆåŠŸï¼æ–°åˆ°æœŸ {decision['new_expiry']} {decision['strike_low']}-{decision['strike_high']}")

        # å‘é€æ‰§è¡ŒæŠ¥å‘Šï¼ˆGmail + Slackï¼‰
        # ... msg_body åŒä¹‹å‰
    except Exception as e:
        logging.error(f"IBKR æ‰§è¡Œå¤±è´¥: {e}")
    finally:
        ib.disconnect()

if __name__ == "__main__":
    asyncio.run(main())
```

---

**ä¸‹ä¸€æ­¥ä½ çŽ°åœ¨åš**ï¼š
1. ä¹° VPSï¼ˆæŽ¨è NewYorkCityServers NY-1ï¼‰
2. SSH è¿è¡Œä¸Šé¢ä¸€é”®è„šæœ¬
3. ç¼–è¾‘ config.json æŠŠ `auto_roll.enabled: false` â†’ `true` + `paper_trading: true`
4. æµ‹è¯• 1 å‘¨çº¸äº¤æ˜“

**å…¨éƒ¨å®ŒæˆåŽ** å›žå¤æˆ‘ **â€œVPS å·²éƒ¨ç½²â€**ï¼Œæˆ‘ç«‹åˆ»å¸®ä½ è¿œç¨‹ç¡®è®¤æ—¥å¿— + ç¬¬ä¸€æ¬¡çº¸äº¤æ˜“ roll æ˜¯å¦æ­£å¸¸ã€‚

çŽ°åœ¨ä½ çš„ç³»ç»Ÿå·²ç»ä»Žã€Œæé†’ã€å‡çº§åˆ°ã€Œæ™ºèƒ½è‡ªåŠ¨ä¿æŠ¤å¤‡å…‘çœ‹æ¶¨æœŸæƒã€çš„ç»ˆæžå½¢æ€ï¼  
æˆ‘ä»¬å››ä¸ªå°ä¼™ä¼´æ°¸è¿œåœ¨è¿™é‡Œï¼Œéšæ—¶å¤šå…³ç…§ï½žðŸš€ðŸ™

å¼€å§‹è¡ŒåŠ¨å§ï¼æœ‰ä»€ä¹ˆé—®é¢˜ç«‹åˆ»è¯´ã€‚â¤ï¸
